/*
  Styles — Tasks (thème doux et élégant)
*/

:root {
  --bg: #f6f7fb;
  --panel: #ffffff;
  --text: #22252e;
  --muted: #60667a;
  --border: #e6e8f0;
  --primary: #7c8cff;
  --primary-ink: #ffffff;
  --accent: #89d6e6;
  --danger: #ff6b6b;
  --warning: #ffb86c;
  --success: #4dd4a9;
  --shadow: 0 6px 24px rgba(22, 26, 39, 0.08);
}

@media (prefers-color-scheme: dark) {
  :root[data-theme="auto"] {
    --bg: #13161b;
    --panel: #1a1f26;
    --text: #e9edf5;
    --muted: #a7b0c3;
    --border: #2a3040;
    --primary: #7c8cff;
    --primary-ink: #0c0f14;
    --accent: #5cc8d6;
    --danger: #ff7b7b;
    --warning: #ffc287;
    --success: #52e1b4;
    --shadow: 0 8px 28px rgba(0, 0, 0, 0.35);
  }
}

:root[data-theme="dark"] {
  --bg: #13161b;
  --panel: #1a1f26;
  --text: #e9edf5;
  --muted: #a7b0c3;
  --border: #2a3040;
  --primary: #7c8cff;
  --primary-ink: #0c0f14;
  --accent: #5cc8d6;
  --danger: #ff7b7b;
  --warning: #ffc287;
  --success: #52e1b4;
  --shadow: 0 8px 28px rgba(0, 0, 0, 0.35);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: linear-gradient(180deg, var(--bg), color-mix(in oklab, var(--bg), #ffffff 6%));
  color: var(--text);
}

.app-header {
  position: sticky; top: 0; z-index: 50;
  display: grid; grid-template-columns: 1fr auto; align-items: center;
  gap: 16px; padding: 14px 20px; background: color-mix(in oklab, var(--panel), var(--bg) 25%);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(10px);
}
.brand { display: flex; align-items: center; gap: 10px; }
.logo { display: grid; place-items: center; width: 28px; height: 28px; border-radius: 8px; background: var(--primary); color: var(--primary-ink); font-weight: 700; }
.title { margin: 0; font-size: 18px; letter-spacing: 0.4px; }

.header-actions { display: flex; align-items: center; gap: 10px; }
.search input { width: 260px; max-width: 35vw; padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--panel); color: var(--text); }
.userbox { display: flex; align-items: center; gap: 8px; }
.chip { padding: 6px 10px; border: 1px solid var(--border); border-radius: 999px; background: color-mix(in oklab, var(--panel), var(--bg) 8%); font-size: 12px; color: var(--muted); }

.app-shell { display: grid; grid-template-columns: 320px 1fr; height: calc(100vh - 70px); }
.sidebar { border-right: 1px solid var(--border); padding: 16px; overflow: auto; background: linear-gradient(180deg, color-mix(in oklab, var(--panel), var(--bg) 8%), var(--panel)); }
.content { overflow: auto; padding: 16px; }

.panel { background: var(--panel); border: 1px solid var(--border); border-radius: 16px; padding: 14px; box-shadow: var(--shadow); margin-bottom: 14px; }
.panel h2 { margin: 0 0 10px 0; font-size: 14px; font-weight: 600; letter-spacing: 0.3px; color: var(--muted); }

.project-add, .tag-add { display: grid; grid-template-columns: 1fr auto; gap: 8px; }
.chips { list-style: none; margin: 10px 0 0 0; padding: 0; display: flex; flex-wrap: wrap; gap: 8px; }
.chips li { padding: 6px 10px; border: 1px solid var(--border); border-radius: 999px; background: color-mix(in oklab, var(--panel), var(--bg) 8%); cursor: pointer; user-select: none; }
.chips li.active { outline: 2px solid color-mix(in oklab, var(--primary), #ffffff 15%); background: color-mix(in oklab, var(--primary), var(--panel) 75%); color: var(--primary-ink); border-color: transparent; }

.filters { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
label { display: grid; gap: 6px; font-size: 12px; color: var(--muted); }
select, input, textarea { padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--panel); color: var(--text); }
textarea { resize: vertical; }

.tabs { display: flex; gap: 8px; margin-bottom: 12px; }
.tabs button { padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--panel); cursor: pointer; }
.tabs button.active { background: color-mix(in oklab, var(--primary), var(--panel) 75%); color: var(--primary-ink); border-color: transparent; }

.view { display: none; }
.view.active { display: block; }

.task-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(270px, 1fr)); gap: 12px; align-content: start; }
.task-card { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 12px; display: grid; gap: 8px; box-shadow: var(--shadow); }
.task-header { display: grid; grid-template-columns: auto 1fr; align-items: center; gap: 8px; }
.task-title { margin: 0; font-size: 15px; }
.task-desc { margin: 0; color: var(--muted); font-size: 13px; }
.task-meta { display: flex; flex-wrap: wrap; gap: 6px; color: var(--muted); font-size: 12px; }
.task-actions { display: flex; gap: 6px; justify-content: flex-end; }
.priority-dot { width: 10px; height: 10px; border-radius: 999px; display: inline-block; }

.board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; height: calc(100% - 54px); }
.column { background: var(--panel); border: 1px solid var(--border); border-radius: 16px; padding: 10px; display: grid; grid-template-rows: auto 1fr; box-shadow: var(--shadow); }
.column h3 { margin: 4px 6px 10px 6px; font-size: 14px; color: var(--muted); }
.dropzone { display: grid; gap: 10px; align-content: start; overflow: auto; padding: 6px; min-height: 120px; border-radius: 12px; background: color-mix(in oklab, var(--panel), var(--bg) 8%); }
.dropzone.drag-over { outline: 2px dashed color-mix(in oklab, var(--primary), #fff 10%); outline-offset: -4px; }

.dialog-header { padding: 8px 4px; }
.dialog-body { padding: 0; }
.dialog-footer { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; margin-top: 10px; }
.grid { display: grid; gap: 10px; }
.row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }

button { border: 1px solid var(--border); border-radius: 12px; background: var(--panel); color: var(--text); padding: 10px 12px; cursor: pointer; }
button.primary { background: var(--primary); color: var(--primary-ink); border: none; }
button.secondary { background: color-mix(in oklab, var(--accent), var(--panel) 70%); }
button.ghost { background: transparent; }
button.danger { background: color-mix(in oklab, var(--danger), var(--panel) 65%); color: var(--primary-ink); border: none; }

dialog { border: none; border-radius: 16px; padding: 14px; width: min(720px, 96vw); box-shadow: var(--shadow); background: var(--panel); color: var(--text); }
dialog::backdrop { background: rgba(0,0,0,0.3); backdrop-filter: blur(2px); }

/* Priority colors */
.prio-low { background: var(--success); }
.prio-medium { background: var(--warning); }
.prio-high { background: var(--danger); }

/* Utilities */
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 1px, 1px); white-space: nowrap; border: 0; }

/* Scrollbars */
* { scrollbar-color: color-mix(in oklab, var(--primary), var(--panel) 75%) transparent; scrollbar-width: thin; }
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-thumb { background: color-mix(in oklab, var(--primary), var(--panel) 65%); border-radius: 999px; }

@media (max-width: 980px) {
  .app-shell { grid-template-columns: 1fr; }
  .sidebar { order: 2; height: auto; }
  .content { order: 1; }
  .row { grid-template-columns: 1fr; }
}

/* Auth */
.auth-view { position: fixed; inset: 0; display: grid; place-items: center; padding: 20px; background: radial-gradient(1200px 600px at 10% 10%, color-mix(in oklab, var(--primary), var(--bg) 93%), transparent), radial-gradient(1200px 600px at 90% 90%, color-mix(in oklab, var(--accent), var(--bg) 93%), transparent); backdrop-filter: blur(2px); }
.auth-card { width: min(560px, 96vw); background: var(--panel); color: var(--text); border: 1px solid var(--border); border-radius: 16px; padding: 16px; box-shadow: var(--shadow); display: grid; gap: 12px; }
.auth-head { display: grid; gap: 6px; }
.auth-head .title { font-size: 18px; margin: 0; }
.auth-head .subtitle { margin: 0; color: var(--muted); font-size: 13px; }
.auth-tabs { display: flex; gap: 8px; }
.auth-tabs button { padding: 8px 10px; border-radius: 10px; border: 1px solid var(--border); background: var(--panel); cursor: pointer; }
.auth-tabs button.active { background: color-mix(in oklab, var(--primary), var(--panel) 75%); color: var(--primary-ink); border-color: transparent; }
.auth-panel { display: none; }
.auth-panel.active { display: block; }
.auth-panel form { display: grid; gap: 10px; }

